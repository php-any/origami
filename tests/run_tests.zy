namespace tests;

$path = __DIR__;

Log::info("path = ", $path);

for (_, $file in scandir($path)) {
    $subDir = OS::path($path, $file);
    if(is_dir($subDir)) {
        for (_, $file in scandir($subDir)) {
            $filePath = OS::path($subDir, $file);
            if(!is_dir($filePath)) {
                try {
                    if($filePath->indexOf(".cjp") == $filePath->length - 4) {
                        Log::info("æ‰§è¡Œ {$filePath}");
                        include($filePath);
                    } else {
                        continue;
                    }
                } catch (Exception $e) {
                    Log::fatal("æ‰§è¡Œæ–‡ä»¶å‘ç”Ÿé”™è¯¯, file={$filePath}; error={$e->getMessage()}")
                } catch (Error $e) {
                    Log::fatal("æ‰§è¡Œæ–‡ä»¶å‘ç”ŸError, file={$filePath}; error=" + $e->getMessage())
                }
            }
        }
    }
}

Log::info("ğŸ‰ æ¥å£åŠŸèƒ½æµ‹è¯•å®Œæˆ");